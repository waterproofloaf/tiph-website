<div class="content">
    <!-- Form -->
    <div class="content">
        <div class="cms-breadcrumbs text-uppercase pb-3">
            <a href="cms-donate-mode">Donate Mode</a> / Edit Donation Mode
        </div>
        <div id="form-container" class="row">
            <div class="col-md-12">
                <form method="post" enctype="multipart/form-data">
                    <div class="card cms-blog">
                        <div class="card-header">
                            <h5>Edit Donation Mode:</h5>
                        </div>
                        <div class="card-body">
                            <h5 class="cms-font-text-error" id="donate-error">{{donateErrorMessage}}</h5>
                            <div class="form-group">
                                <label for="donatemode_name">Mode of Payment Name (e.g. GCash)</label>
                                <input type="text" class="form-control" name="donatemode_name" id="donatemode_name"
                                    placeholder="Mode of Payment Name" value="{{donatemode.donatemode_name}}">
                            </div>
                            <div class="form-group">
                                <label for="donatemode_color">Color (for the background)</label>
                                <input type="color" id="donatemode_color" name="donatemode_color"
                                    value="{{donatemode.donatemode_color}}">
                            </div>
                            <div class="pb-2">
                                <div class="preview-images donate-pic-preview">
                                    <img src="/donatemodepic{{donatemode._id}}">
                                </div>
                                <label for="donatemodepic">Mode Photo (preferably .png image)</label>
                                <input type="file" id="donatemodepic" name="donatemodepic{{donatemode._id}}"
                                    class="donate-cover" accept="image/*" />
                            </div>
                            <div class="form-group text-center">
                                <button type="submit" class="btn btn-outline-success">SUBMIT</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<style>
    div.preview-images>img {
        width: 30%;
    }
</style>

<script>
    $(document).ready(function () {
        let imagesPreview = function (input, placeToInsertImagePreview) {
            if (input.files) {
                let filesAmount = input.files.length;
                for (i = 0; i < 1; i++) {
                    let reader = new FileReader();
                    reader.onload = function (event) {
                        $($.parseHTML("<img>"))
                            .attr("src", event.target.result)
                            .appendTo(placeToInsertImagePreview);
                    };
                    reader.readAsDataURL(input.files[i]);
                }
            }
        };

        $("#donatemodepic").on("change", function () {
            $(".donate-pic-preview").empty();
            imagesPreview(this, "div.donate-pic-preview");
        });
    });
</script>